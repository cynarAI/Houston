---
name: Auto-Analyse bei Chat-Start
description: Automatische App-Analyse vor jedem Chat - stellt sicher, dass Cursor immer den aktuellen Zustand kennt
ruleType: Always
---

# Automatische App-Analyse bei Chat-Start

**Empfohlen, nicht verpflichtend:** Starte neue Chats mit einer **kurzen Kontextaufnahme**, wenn du unsicher bist, ob dein Wissen noch aktuell ist. Skaliere die Analyse nach gesundem Menschenverstand:

- ğŸ” **Quick Glance (Default):** Reicht fÃ¼r die meisten Fragen. PrÃ¼fe nur die 1-2 Dateien, die offensichtlich relevant sind.
- ğŸ§­ **Gezielte Analyse:** Wenn Unklarheiten bleiben, erweitere den Blick Schritt fÃ¼r Schritt.
- ğŸš« **Kein Overkill:** VollstÃ¤ndige RundgÃ¤nge durch das gesamte Repo sind nur nÃ¶tig, wenn der User ausdrÃ¼cklich nach einer breiten Codebewertung fragt.

## Analyse-Protokoll

### Empfohlene Checks bei neuem Chat

Nutze diese Liste als Spickzettel. WÃ¤hle nur die Punkte aus, die fÃ¼r die aktuelle Frage wichtig sind.

#### 1. Projekt-Struktur & Architektur
- âœ… Aktuelle Verzeichnisstruktur prÃ¼fen (`client/`, `server/`, `drizzle/`, `shared/`)
- âœ… Haupt-Router und Module identifizieren (`server/routers.ts`)
- âœ… Datenbank-Schema Ã¼berprÃ¼fen (`drizzle/schema.ts`)
- âœ… Frontend-Routing-Struktur analysieren (`client/src/App.tsx`)

#### 2. Domain-Module Status
- âœ… **Houston Coach (Chat)**: `server/routers/chat.ts`, `client/src/pages/Chats.tsx`
- âœ… **Goals & Todos**: `server/routers/goals.ts`, `server/routers/todos.ts`
- âœ… **Strategy**: `server/routers/strategy.ts`
- âœ… **Credits**: `server/creditService.ts`, `server/routers/credits.ts`
- âœ… **Referrals**: `server/referralService.ts`, `server/routers/referrals.ts`
- âœ… **Workspaces**: `server/routers/workspaces.ts`
- âœ… **Playbooks**: `server/routers/playbooks.ts`

#### 3. Kritische Services
- âœ… **CreditService**: Funktionsweise und Credit-Kosten prÃ¼fen
- âœ… **LLM Integration**: `server/_core/llm.ts` - Manus LLM Integration
- âœ… **Auth**: `server/_core/auth.ts` - OAuth Flow
- âœ… **tRPC Setup**: `server/_core/trpc.ts` - Procedures und Error Handling

#### 4. Frontend-Komponenten
- âœ… Haupt-Layout: `client/src/components/DashboardLayout.tsx`
- âœ… UI-Komponenten: `client/src/components/ui/` (shadcn/ui)
- âœ… Seiten: `client/src/pages/` - Alle Route-Pages
- âœ… Hooks & Contexts: `client/src/hooks/`, `client/src/contexts/`

#### 5. Aktuelle Ã„nderungen
- âœ… Git-Status prÃ¼fen (uncommitted changes, aktuelle Branch)
- âœ… KÃ¼rzlich geÃ¤nderte Dateien analysieren
- âœ… Offene Linter-Fehler identifizieren
- âœ… Test-Status prÃ¼fen (falls vorhanden)

#### 6. Konfiguration & Dependencies
- âœ… `package.json` - Dependencies und Scripts
- âœ… `tailwind.config.js` - Design-System
- âœ… `drizzle.config.ts` - DB-Konfiguration
- âœ… Environment-Variablen (`.env.example`)

## Analyse-Methodik

### Codebase-Search Strategie

Nutze `codebase_search` fÃ¼r semantische Analysen:

1. **Architektur-VerstÃ¤ndnis:**
   - "How does the app structure work?"
   - "What are the main components and modules?"
   - "How does authentication work?"

2. **Domain-Module:**
   - "How does the credit system work?"
   - "How does the chat feature work?"
   - "How are goals and todos managed?"

3. **Aktuelle Implementierungen:**
   - "Where is feature X implemented?"
   - "How does Y work in the codebase?"

### File-Reading Strategie

Lese kritische Dateien direkt:

1. **Architektur-Dateien:**
   - `server/routers.ts` - Alle Router
   - `drizzle/schema.ts` - DB-Schema
   - `client/src/App.tsx` - Frontend-Routing

2. **Service-Dateien:**
   - `server/creditService.ts` - Credit-Logik
   - `server/_core/llm.ts` - LLM-Integration
   - `server/_core/trpc.ts` - tRPC-Setup

3. **Dokumentation:**
   - `docs/architecture/architecture.md` - Architektur-Ãœbersicht
   - `README.md` - Projekt-Ãœbersicht

## Analyse-Ausgabe

Nach der Analyse solltest du folgendes wissen:

### âœ… Projekt-Kontext
- Was ist Houston? (KI-Marketing-Coach fÃ¼r KMUs)
- Tech Stack (React, Vite, tRPC, Drizzle, Manus 1.5)
- Plattform (Manus 1.5 - KRITISCH)

### âœ… Architektur-VerstÃ¤ndnis
- Client-Server-Struktur
- Domain-Module und ihre Verantwortlichkeiten
- Datenfluss (Frontend â†’ tRPC â†’ Services â†’ DB)

### âœ… Aktuelle Implementierung
- Welche Features sind implementiert?
- Wie funktionieren kritische Services?
- Welche Patterns werden verwendet?

### âœ… Code-QualitÃ¤t
- Gibt es offene Linter-Fehler?
- Gibt es uncommitted Changes?
- Gibt es bekannte Issues?

## Wann die Analyse durchfÃ¼hren

- âœ… **Mache einen Check**, wenn du bei einer Antwort unsicher bist, ob der aktuelle Codezustand bekannt ist.
- âœ… **Vertiefe die Analyse**, sobald du merkst, dass du ohne zusÃ¤tzliche Infos nur raten wÃ¼rdest.
- â±ï¸ **Ãœberspringe den Check**, wenn die Frage rein konzeptionell ist oder du die betroffenen Dateien bereits im Blick hast.

## Analyse-Tiefe

### Minimal-Analyse (Standard)
- HÃ¶chstens zwei relevante Dateien Ã¼berfliegen
- PrÃ¼fen, ob offenliegende Ã„nderungen den Kontext beeinflussen
- Notieren, welche Fragen noch offen sind

### Tiefe-Analyse (nur bei Bedarf)
- VollstÃ¤ndige Codebase-Suche
- Alle relevanten Dateien lesen
- Detaillierte Architektur-Analyse
- Pattern-Analyse und Best Practices

## Beispiel-Analyse-Ablauf

```
1. [Automatisch] Projekt-Struktur prÃ¼fen
   â†’ client/, server/, drizzle/, shared/ vorhanden

2. [Automatisch] Haupt-Router analysieren
   â†’ server/routers.ts: chat, goals, todos, strategy, credits, referrals, workspaces, playbooks

3. [Automatisch] CreditService prÃ¼fen
   â†’ server/creditService.ts: CREDIT_COSTS definiert, charge/getCost Funktionen vorhanden

4. [Automatisch] Frontend-Routing prÃ¼fen
   â†’ client/src/App.tsx: Wouter-Router mit Routes fÃ¼r alle Pages

5. [Automatisch] Git-Status prÃ¼fen
   â†’ Auf main branch, keine uncommitted changes

6. [Bereit] Kontext vollstÃ¤ndig - kann jetzt Fragen beantworten
```

## Wichtige Erkenntnisse fÃ¼r den Chat

Nach der Analyse solltest du immer wissen:

- âœ… **Was ist Houston?** - KI-Marketing-Coach fÃ¼r KMUs auf Manus 1.5
- âœ… **Wie ist es strukturiert?** - React Frontend, Express+tRPC Backend, Drizzle ORM
- âœ… **Welche Features gibt es?** - Chat, Goals, Todos, Strategy, Credits, Referrals, Workspaces, Playbooks
- âœ… **Wie funktioniert X?** - Basierend auf aktueller Code-Analyse
- âœ… **Was wurde kÃ¼rzlich geÃ¤ndert?** - Basierend auf Git-Status und Datei-Ã„nderungen

## Zusammenfassung

**Diese Regel soll dir helfen:**
- Schnell einzuschÃ¤tzen, wann zusÃ¤tzliche Recherche nÃ¶tig ist
- Den Aufwand pro Frage bewusst zu dosieren
- Trotzdem jederzeit belastbare, kontextuelle Antworten zu liefern

---

**Hinweis:** Nutze diese Leitplanken situativ. Kein Schritt ist vorgeschrieben, solange deine Antwort fundiert und aktuell ist.
